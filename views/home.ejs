<style>
  html,
  body {
    height: 100%;
  }

  @media only screen and (min-width: 993px) {
    .full-height {
      height: calc(100% - 64px);
      margin: 0;
    }
  }

  @media only screen and (max-width: 992px) {
    .full-height {
      height: calc(100% - 56px);
      margin: 0;
    }
  }

  .empty {
    padding: 0;
  }

  .image123 {
    clear: both;
  }

  .title-box {
    margin-top: 3vh;
    clear: both;
  }

  .title-text {
    color: white;
    margin-top: 0;
    font-weight: 700;
  }

  .subtitle-text {
    font-size: 2.3vmax;
    color: white;
  }

  .small-glyph {
    margin-left: 5em;
  }

  #arrow {
    position: absolute;
    top: 0;
    left: 50%;
    width: 24px;
    height: 24px;
    margin-left: -12px;
    border-left: 1px solid #fff;
    border-bottom: 1px solid #fff;
    transform: rotate(-45deg);
    animation: sdb 1.5s infinite;
    box-sizing: border-box;
  }

  @keyframes sdb {
    0% {
      transform: rotate(-45deg) translate(0, 0);
      opacity: 0;
    }

    50% {
      opacity: 1;
    }

    100% {
      transform: rotate(-45deg) translate(-20px, 20px);
      opacity: 0;
    }
  }

  .subtitle {
    padding-top: 3%;
  }

  .home-carousel a {
    display: flex !important;
    align-items: center;
  }

  .home-carousel.carousel .carousel-item > img {
    transform: scale(1.5, 1.5);
  }

  #pod {
    left: 0;
    transform: translateX(-100%);
  }

  .pod-animate {
    animation: slide 1s ease-out forwards;
  }

  @keyframes slide {
    0% {
      left: 0;
      transform: translateX(-100%);
    }

    100% {
      left: 50%;
      transform: translateX(-50%);
    }
  }

  .blog {
    display: flex;
    flex-wrap: wrap;
    margin-left: -20px;
  }

  .blog-card {
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
    margin-left: 20px;
    margin-bottom: 20px;
    min-width: 240px;
  }

  .blog-card .card-content {
    flex: 1 1 auto;
  }

  @supports (display: grid) {
    .blog,
    .blog-card {
      margin: 0;
    }

    .blog {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      grid-gap: 20px;
      margin-bottom: 20px;
    }
  }
</style>
<div class="parallax-container full-height" style="padding: 70px 0;">
  <div class="parallax"><img class="responsive-img" src="images/front-page/toronto.jpg" alt="Toronto"></div>
  <div class="container center landing" style="font-size:0.8em;">
    <div class="image123">
      <img src="images/front-page/waterloo-shield.svg" alt="UWaterloo shield" height="50">
      <img class="small-glyph" src="images/front-page/waterloop-logo.svg" alt="Waterloop logo" height="50">
      <img class="small-glyph" src="images/front-page/leaf.svg" alt="Canadian maple leaf" height="50">
    </div>
    <div class="title-box">
      <h1 class="title-text">Canada's Hyperloop</h1>
      <p class="subtitle-text">
        Having withstood the test of time, team Waterloop is back with
        <br> a whole new roster, preparing to take on the
        <br> SpaceX Hyperloop challenge. <a href="https://wloop.ca/join"><b>Join us!</b></a>
      </p>
    </div>
    <div>
      <div id="social" class="row" style="margin-bottom:0;">
      <div class="col s8 m4 l4 offset-s2 offset-m4 offset-l4 noseldrag">
        <a href="https://www.facebook.com/teamwaterloop" target="_blank"><img src="/images/logos/facebook-new.svg" alt="team waterloop facebook"></a>
        <a href="https://twitter.com/team_waterloop" target="_blank"><img src="/images/logos/twitter-new.svg" alt="team waterloop twitter"></a>
        <a href="https://www.instagram.com/team_waterloop" target="_blank"><img src="/images/logos/instagram-new.svg" alt="team waterloop insta"></a>
      </div>
      </div>
      <a href="#pod-container" style="position: absolute; bottom:80px; left: 50%; z-index: 2; display: inline-block; transform: translate(0, -50%); text-decoration: none;"><span id="arrow"></span></a>
    </div>
  </div>
</div>
<div id="pod-container" class="section relative empty hide-on-small-only noseldrag" style="height:45%; background-color: #deeff5;">
  <div class="flex-align flex-column f3 absolute w100 z2" style="top:10%;">
    <img src="images/front-page/waterloop-logo.svg" alt="Waterloop Logo" height="30">
    <span class="fg-yellow" style="padding: 1rem;">Toronto - Montreal</span>
    <div class="btn btn-round flex-align pn">
      <img style="filter:invert(1);" src="/images/stopwatch.svg" alt="Stopwatch" height="20px"> <span style="margin-left:5px;">in 30 minutes</span>
    </div>
  </div>
  <img class="absolute l0 b0 z1 h90" src="/images/front-page/Waterloop_Toronto_Skyline.svg" alt="Toronto">
  <div id="pod-tube" style="background-color:skyblue; position:absolute; width:100%; bottom:10%; height:20%;">
    <img id="pod" class="absolute h100" src="/images/pod.png" alt="Pod">
  </div>
  <img class="absolute r0 b0 z1 h90" src="/images/front-page/Waterloop_Montreal_Skyline.svg" alt="Montreal">
</div>

<div class="section">
  <div class="row center">
    <div id="sponsors">
      <h2 class="subtitle">Our Sponsors</h2>
      <p class="text" style="font-size:2vmax;">Since the first competition we have relied on our sponsors <br>to support us through our journey to first place.
      </p>
      <div id="gallery" class="carousel center home-carousel">
      <% var sponsors = [
        "/images/sponsors/hypersonic/Balluff.svg",
        "/images/sponsors/hypersonic/altium.svg",
        "/images/sponsors/hypersonic/BOKO_DESIGN.png",
        "/images/sponsors/hypersonic/Communitech.svg",
        "/images/sponsors/hypersonic/EAGLECAD.svg",
        "/images/sponsors/hypersonic/ITS.svg",
        "/images/sponsors/hypersonic/Miltera.png",
        "/images/sponsors/hypersonic/UW_ENGINEERING_ENDOWMENT.png",
        "/images/sponsors/hypersonic/UW_ENGINEERING_SOCIETY.png",
        "/images/sponsors/hypersonic/UW_Engineering.png",
        "/images/sponsors/hypersonic/Altair.jpg",
        "/images/sponsors/supersonic/PAYPAL.svg",
        "/images/sponsors/supersonic/idream.png",
        "/images/sponsors/supersonic/LEGETT_PLATT.svg",
        "/images/sponsors/supersonic/LEAGUE_HEALTH.svg",
        "/images/sponsors/supersonic/Routes_Transport_Group.png"
      ];
        for (var i = 0; i < sponsors.length; i++) {
      %>
        <a class="carousel-item" href="#!"><img src="<%= sponsors[i] %>" alt="Sponsor logo"></a>
      <% } %>
      </div>
    </div>
  </div>
</div>
<div class="parallax-container full-height empty flex-column hide-on-small-only">
  <div class="center">
  <h2 class="subtitle">Our Progress</h2>
  <p class="text" style="font-size:2vmax;">Since the first competition we have learnt more than we we could ever imagine!</p></div>
  <div class="parallax"><img class="responsive-img" src="images/front-page/TeamBG-01.jpg" alt="Team picture"></div>
  <div class="w100 h100 flex-auto relative"><%- include('linechart'); %></div>
</div>
<div class="section white">
  <div class="container row">
    <h2 class="subtitle center">Our Blogs</h2>
    <p class="text center" style="font-size:2vmax;">Behind the scene stories from our journey so far
    </p>
    <% if(blog) { %>
    <div class="blog only-first-on-small">
      <% for(var i = 0; i < 3 && i < blog.length; i++) { %>
        <div class="card blog-card m0">
          <div class="card-image">
            <div class="noseldrag img-3x2" style="background-image: url('<%= blog[i].img %>');"></div>
            <span class="card-title"><%= blog[i].title %></span>
          </div>
          <div class="card-content">
            <p><%= blog[i].subtitle %></p>
          </div>
          <div class="card-action">
            <a href="<%= blog[i].url %>" target="_blank">Keep reading</a>
          </div>
        </div>
      <% } %>
    </div>
    <% } %>
    <a class="right" href="https://medium.com/waterloop" target="_blank"><span style="font-size:1.5vmax; margin:0; font-family: 'proxima_nova_ltsemibold', sans-serif;">Read More Blogs </span><i class="material-icons" style="margin-bottom: 10px !important;">arrow_forward</i></a>
  </div>
</div>

<script>
var podTube = document.getElementById("pod-tube");
var animateHook = function () {
  var boundingRect = podTube.getBoundingClientRect();
  if (boundingRect.top >= 0 && boundingRect.bottom <= document.documentElement.clientHeight) {
    window.removeEventListener("scroll", animateHook);
    document.getElementById("pod").classList.add("pod-animate");
  }
};
window.addEventListener("scroll", animateHook, false);
animateHook();
$(".parallax").parallax();
// Add smooth scrolling to all links
$("a").on("click", function(event) {

// Make sure this.hash has a value before overriding default behavior
  if (this.hash !== "") {
    // Prevent default anchor click behavior
    event.preventDefault();

    // Store hash
    var hash = this.hash;

    // Using jQuery's animate() method to add smooth page scroll
    // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
    $("html, body").animate({
      scrollTop: $(hash).offset().top
    }, 800, function(){

    // Add hash (#) to URL when done scrolling (default click behavior)
      window.location.hash = hash;
    });
  } // End if
});

$(".carousel").carousel({padding: 400, indicators: false});

setInterval(function(){
  $(".carousel").carousel("next");
}, 2000);
</script>
